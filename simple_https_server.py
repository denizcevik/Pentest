# python < 3.12 compliant, use 3.11 or below 
# openssl req -x509 -newkey rsa:4096 -keyout server.key -out server.crt -days 365
from http.server import HTTPServer, SimpleHTTPRequestHandler
import ssl

server_cert = 'server.crt'
server_key = 'server.key'

server_address = ('0.0.0.0', 4443)  

httpd = HTTPServer(server_address, SimpleHTTPRequestHandler)
httpd.socket = ssl.wrap_socket(httpd.socket, certfile=server_cert, keyfile=server_key, server_side=True)

print("Running...")
httpd.serve_forever()

----------------------------------------------------------------------------------------------

# Log POST & GET
# openssl req -x509 -newkey rsa:4096 -keyout server.key -out server.crt -days 365
from http.server import HTTPServer, BaseHTTPRequestHandler
import ssl

server_cert = 'server.crt'
server_key = 'server.key'

class CustomRequestHandler(BaseHTTPRequestHandler):
    def do_POST(self):
        content_length = int(self.headers['Content-Length'])
        post_data = self.rfile.read(content_length)
        print(post_data.decode('utf-8'))

        self.send_response(200)
        self.end_headers()

    def do_GET(self):
        self.send_response(200)
        self.end_headers()

server_address = ('0.0.0.0', 443)  

httpd = HTTPServer(server_address, CustomRequestHandler)
httpd.socket = ssl.wrap_socket(httpd.socket, certfile=server_cert, keyfile=server_key, server_side=True)

print("Running...")
httpd.serve_forever()
