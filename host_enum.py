#https://cyberconqueror.medium.com/awesome-bug-bounty-tools-exploring-subdomain-enumeration-and-reconnaissance-tools-7bffb25210e6
import subprocess
import sys
import re

if len(sys.argv) != 2:
    print("KullanÄ±m: python script.py <domain>")
    sys.exit(1)

domain = sys.argv[1]
command_outputs = {}

commands = [
    "/opt/Sublist3r/sublist3r.py -d {domain}",
    "/opt/Sudomy/sudomy -d {domain}",
    "/root/go/bin/subfinder -d {domain}"
    "/root/go/bin/amass enum -d {domain}",
]

search_keyword=domain
matching_outputs = set()

for idx, command in enumerate(commands, start=1):
    try:
        print("[+] Starting to run "+command)
        formatted_command = command.format(domain=domain)
        output = subprocess.check_output(formatted_command, shell=True, text=True)
        print("[+] Finished "+str(idx)+". command.")
        lines = output.splitlines()
        for line in lines:
            if search_keyword in line:
                 matching_outputs.add(line)

    except subprocess.CalledProcessError as e:
        print(f"Error: {e}")

print(f"----------------- Results -----------------")
for idx, output in enumerate(matching_outputs, start=1):
    final_output = re.sub(r'.*Enumerating subdomains.*', '', output)
    print(f"{final_output}")
